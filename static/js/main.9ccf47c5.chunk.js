(this["webpackJsonpmainapp-ui"]=this["webpackJsonpmainapp-ui"]||[]).push([[0],{23:function(e,t,a){},41:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(19),c=a.n(r),s=(a(41),a(23),a(9)),o=a(11),i=a.n(o),u=(a(24),a(1));var l=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=(t[0],t[1]);return Object(n.useEffect)((function(){i()({method:"GET",url:"http://127.0.0.1:8000/api/breed"}).then((function(e){a(e.data)}))}),[]),Object(u.jsx)("div",{})},p=a(13),b=a(3);var j=function(e){var t=e.match,a=Object(n.useState)({}),r=Object(s.a)(a,2),c=(r[0],r[1]),o=Object(n.useState)([]),l=Object(s.a)(o,2),p=(l[0],l[1]),b=t.params.id;return Object(n.useEffect)((function(){i()({method:"GET",url:"http://127.0.0.1:8000/api/breed/".concat(b)}).then((function(e){c(e.data),p(e.data.posts)}))}),[b]),Object(u.jsx)("div",{})};var m=function(e){var t=e.match,a=Object(n.useState)({}),r=Object(s.a)(a,2),c=(r[0],r[1]),o=t.params.id;return Object(n.useEffect)((function(){i()({method:"GET",url:"http://127.0.0.1:8000/api/form/".concat(o)}).then((function(e){c(e.data)}))}),[o]),Object(u.jsx)("div",{})},d=a(15),h=a(4),f=a(12),O=a.n(f),g=a(16),x="LOGIN_SUCCESS",v="LOGIN_FAIL",S="LOGOUT",y="REFRESH",w="REFRESH_FAIL";var I=a(27),k=a(36),N=localStorage.getItem("access"),E={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:!!N},A=[k.a],L=Object(I.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case x:return localStorage.setItem("access",n.access),localStorage.setItem("refresh",n.refresh),Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!0,access:n.access,refresh:n.refresh});case v:return alert("Fail"),Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!1,access:null,refresh:null});case w:return Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!1,access:null,refresh:null});case S:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!1,access:null,refresh:null});case y:return localStorage.removeItem("access"),localStorage.setItem("access",n.access),Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!0,access:n.access});default:return e}}),I.a.apply(void 0,A)),C=i.a.create({baseURL:"http://127.0.0.1:8080"});C.interceptors.request.use((function(e){return e.headers=function(){var e=localStorage.getItem("access");return e?{"Content-Type":"application/json",Authorization:"Bearer "+e}:{}}(),e})),C.interceptors.response.use((function(e){return e}),function(){var e=Object(g.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.config,console.log(a),401!==t.response.status){e.next=10;break}return e.next=5,L.dispatch(q());case 5:return a.headers.Authorization="Bearer ".concat(localStorage.getItem("access")),console.log(a),e.abrupt("return",C(a));case 10:if(404!==t.response.status){e.next=15;break}return alert("Bad request"),e.abrupt("return",Promise.reject(t));case 15:if(403!==t.response.status){e.next=20;break}return alert("Permission denied"),e.abrupt("return",Promise.reject(t));case 20:if(400!==t.response.status){e.next=24;break}return e.abrupt("return",Promise.reject(t));case 24:return alert("Error"),e.abrupt("return",Promise.reject(t));case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var F=C,P="http://localhost:8080/",q=function(){return function(){var e=Object(g.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.post(P+"token/refresh",{refresh:localStorage.getItem("refresh")}).then((function(e){t({type:y,payload:e.data})})).catch((function(e){t({type:w})}));case 2:e.sent,console.log("refresh action creater");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G=a(18);var T=function(){var e=Object(G.c)((function(e){return e.isAuthenticated})),t=Object(G.b)(),a=Object(n.useState)({username:"",password:""}),r=Object(s.a)(a,2),c=r[0],o=r[1],i=function(e){e.persist(),o(Object(h.a)(Object(h.a)({},c),{},Object(d.a)({},e.target.name,e.target.value)))};return e?Object(u.jsx)(b.a,{to:{pathname:"/"}}):Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){var a,n;e.preventDefault(),e.preventDefault(),t((a=c.username,n=c.password,function(){var e=Object(g.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.post(P+"token/obtain",{username:a,password:n}).then((function(e){t({type:x,payload:e.data})})).catch((function(e){t({type:v})}));case 2:e.sent,console.log("login action creater");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(u.jsx)("div",{class:"form-outline mb-4",style:{"margin-left":"500px"},children:Object(u.jsx)("input",{type:"text",name:"username",className:"input",placeholder:"Username",maxLength:"100",required:!0,id:"id_username",onChange:i})}),Object(u.jsx)("div",{class:"form-outline mb-4",style:{"margin-left":"500px"},children:Object(u.jsx)("input",{type:"text",name:"password",className:"input",placeholder:"Password",maxLength:"100",required:!0,id:"password",onChange:i})}),Object(u.jsx)("input",{className:"btn btn-outline-dark btn-lg btn-block mb-4",style:{"margin-left":"700px"},type:"submit",value:"Sign in"}),Object(u.jsxs)("div",{className:"text-center",children:[Object(u.jsxs)("p",{children:["Not a member? ",Object(u.jsx)(p.b,{to:{pathname:"/register"},className:"btn btn-link",children:"Sing up"})]}),Object(u.jsx)("p",{children:"or sign up with:"}),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-12",children:Object(u.jsxs)("a",{className:"btn btn-lg btn-block  btn-light",href:"#",children:[Object(u.jsx)("img",{src:"https://img.icons8.com/color/16/000000/google-logo.png"})," Signup Using Google"]})})})]})]})})};var B=function(e){e.match;var t=Object(n.useState)({username:"",password:""}),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(!1),l=Object(s.a)(o,2),p=l[0],j=l[1],m=function(e){e.persist(),c(Object(h.a)(Object(h.a)({},r),{},Object(d.a)({},e.target.name,e.target.value)))};return p?Object(u.jsx)(b.a,{to:{pathname:"/login"}}):Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){var t,a;e.preventDefault(),(t=r.username,a=r.password,i.a.post("http://127.0.0.1:8080/register",{username:t,password:a})).then((function(e){j(!0)})).catch((function(e){e.response?alert("Bad request"):e.request&&alert("Error")}))},children:[Object(u.jsx)("div",{className:"form-outline mb-4",style:{"margin-left":"500px"},children:Object(u.jsx)("input",{type:"text",name:"username",className:"input",placeholder:"Username",maxLength:"100",required:!0,id:"id_username",onChange:m})}),Object(u.jsx)("div",{className:"form-outline mb-4",style:{"margin-left":"500px"},children:Object(u.jsx)("input",{type:"text",name:"password",className:"input",placeholder:"Password",maxLength:"100",required:!0,id:"password",onChange:m})}),Object(u.jsx)("input",{className:"btn btn-outline-dark btn-lg btn-block mb-4",style:{"margin-left":"700px"},type:"submit",value:"Sign up"})]})})};var U=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(p.a,{children:[Object(u.jsx)(l,{}),Object(u.jsxs)(b.d,{children:[Object(u.jsx)(b.b,{path:"/breed/:id",exact:!0,component:j}),Object(u.jsx)(b.b,{path:"/form/:id",exact:!0,component:m}),Object(u.jsx)(b.b,{path:"/login",exact:!0,component:T}),Object(u.jsx)(b.b,{path:"/register",exact:!0,component:B})]})]})})},R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,68)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};c.a.render(Object(u.jsxs)(G.a,{store:L,children:["np",Object(u.jsx)(U,{})]}),document.getElementById("root")),R()}},[[67,1,2]]]);
//# sourceMappingURL=main.9ccf47c5.chunk.js.map