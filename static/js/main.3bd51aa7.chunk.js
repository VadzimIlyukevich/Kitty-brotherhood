(this["webpackJsonpmainapp-ui"]=this["webpackJsonpmainapp-ui"]||[]).push([[0],{23:function(e,t,r){},41:function(e,t,r){},67:function(e,t,r){"use strict";r.r(t);var a=r(0),c=r(19),n=r.n(c),s=(r(41),r(23),r(9)),o=r(11),u=r.n(o),i=(r(24),r(1));var l=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),r=(t[0],t[1]);return Object(a.useEffect)((function(){u()({method:"GET",url:"http://127.0.0.1:8000/api/breed"}).then((function(e){r(e.data)}))}),[]),Object(i.jsx)("div",{})},f=r(13),p=r(3);var h=function(e){var t=e.match,r=Object(a.useState)({}),c=Object(s.a)(r,2),n=(c[0],c[1]),o=Object(a.useState)([]),l=Object(s.a)(o,2),f=(l[0],l[1]),p=t.params.id;return Object(a.useEffect)((function(){u()({method:"GET",url:"http://127.0.0.1:8000/api/breed/".concat(p)}).then((function(e){n(e.data),f(e.data.posts)}))}),[p]),Object(i.jsx)("div",{})};var b=function(e){var t=e.match,r=Object(a.useState)({}),c=Object(s.a)(r,2),n=(c[0],c[1]),o=t.params.id;return Object(a.useEffect)((function(){u()({method:"GET",url:"http://127.0.0.1:8000/api/form/".concat(o)}).then((function(e){n(e.data)}))}),[o]),Object(i.jsx)("div",{})},j=(r(15),r(4)),d=r(12),O=r.n(d),m=r(16),g="LOGIN_SUCCESS",v="LOGIN_FAIL",S="LOGOUT",x="REFRESH",I="REFRESH_FAIL";var E=r(27),A=r(36),y=localStorage.getItem("access"),k={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:!!y},F=[A.a],L=Object(E.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,r=t.type,a=t.payload;switch(r){case g:return localStorage.setItem("access",a.access),localStorage.setItem("refresh",a.refresh),Object(j.a)(Object(j.a)({},e),{},{isAuthenticated:!0,access:a.access,refresh:a.refresh});case v:return alert("Fail"),Object(j.a)(Object(j.a)({},e),{},{isAuthenticated:!1,access:null,refresh:null});case I:return Object(j.a)(Object(j.a)({},e),{},{isAuthenticated:!1,access:null,refresh:null});case S:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(j.a)(Object(j.a)({},e),{},{isAuthenticated:!1,access:null,refresh:null});case x:return localStorage.removeItem("access"),localStorage.setItem("access",a.access),Object(j.a)(Object(j.a)({},e),{},{isAuthenticated:!0,access:a.access});default:return e}}),E.a.apply(void 0,F)),w=u.a.create({baseURL:"http://127.0.0.1:8080"});w.interceptors.request.use((function(e){return e.headers=function(){var e=localStorage.getItem("access");return e?{"Content-Type":"application/json",Authorization:"Bearer "+e}:{}}(),e})),w.interceptors.response.use((function(e){return e}),function(){var e=Object(m.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.config,console.log(r),401!==t.response.status){e.next=10;break}return e.next=5,L.dispatch(C());case 5:return r.headers.Authorization="Bearer ".concat(localStorage.getItem("access")),console.log(r),e.abrupt("return",w(r));case 10:if(404!==t.response.status){e.next=15;break}return alert("Bad request"),e.abrupt("return",Promise.reject(t));case 15:if(403!==t.response.status){e.next=20;break}return alert("Permission denied"),e.abrupt("return",Promise.reject(t));case 20:if(400!==t.response.status){e.next=24;break}return e.abrupt("return",Promise.reject(t));case 24:return alert("Error"),e.abrupt("return",Promise.reject(t));case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var P=w,T="http://localhost:8080/",C=function(){return function(){var e=Object(m.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.post(T+"token/refresh",{refresh:localStorage.getItem("refresh")}).then((function(e){t({type:x,payload:e.data})})).catch((function(e){t({type:I})}));case 2:e.sent,console.log("refresh action creater");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G=r(18);var B=function(){return Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)(f.a,{children:[Object(i.jsx)(l,{}),Object(i.jsxs)(p.d,{children:[Object(i.jsx)(p.b,{path:"/breed/:id",exact:!0,component:h}),Object(i.jsx)(p.b,{path:"/form/:id",exact:!0,component:b})]})]})})},R=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,68)).then((function(t){var r=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,s=t.getTTFB;r(e),a(e),c(e),n(e),s(e)}))};n.a.render(Object(i.jsxs)(G.a,{store:L,children:["np",Object(i.jsx)(B,{})]}),document.getElementById("root")),R()}},[[67,1,2]]]);
//# sourceMappingURL=main.3bd51aa7.chunk.js.map